Разработайте расширенное REST API для блог-платформы.  
## Функциональные требования

1. Управление пользователями  
    Эндпоинты:  
    · POST /api/register — регистрация пользователя  
    · POST /api/login — вход  
    · при успешном входе возвращается JWT-токен  
    Требования:  
    · email должен быть уникальным  
    · пароли хешируются (bcrypt)  
    · корректные коды ошибок  
    · валидация входных данных
2. Управление постами  
    Эндпоинты:  
    · POST /api/posts — создать пост (только авторизованный пользователь)  
    · GET /api/posts — получить список постов (доступно всем)  
    · GET /api/posts/{id} — получить один пост  
    · PUT /api/posts/{id} — обновить пост (только автор)  
    · DELETE /api/posts/{id} — удалить пост (только автор)  
    Требования:  
    · автор поста определяется по JWT  
    · изменение чужого поста → 403 Forbidden  
    · для списка постов должна быть пагинация (limit, offset)  
    · валидация входных данных  
    · корректные HTTP-коды
3. Управление комментариями  
    Эндпоинты:  
    · POST /api/posts/{postId}/comments — комментировать пост  
    · GET /api/posts/{postId}/comments — получить комментарии  
    Условия:  
    · комментировать могут только авторизованные пользователи  
    · при добавлении комментария проверяется существование поста
4. Планировщик отложенных публикаций  
    Ваша система должна поддерживать возможность создания постов с отложенной публикацией.  
    Описание функционала:  
    – в таблице постов должно появиться поле publish_at (TIMESTAMP);  
    – если пользователь указал время публикации в будущем, пост создаётся в статусе черновик;  
    – фоновая горутина-планировщик (ticker + контекст) каждые N секунд:  
    o проверяет посты, у которых publish_at <= now();  
    o автоматически публикует такие посты;  
    – обработка публикаций должна происходить конкурентно:  
    o воркер или worker pool;  
    – логирование процесса публикации обязательно;  
    – graceful shutdown: при остановке сервиса фоновые задачи должны корректно завершаться.
5. Общие требования к API  
    · GET /api/health — проверка состояния сервиса  
    · логирование всех запросов  
    · структура слоёв:Handler → Service → Repository → PostgreSQL  
    · использование JWT-middleware для защищённых эндпоинтов  
    · центральная обработка ошибок  
    · единый формат JSON-ответов
    
## Технические требования**
    · БД — PostgreSQL (через Docker Compose).  
    · Миграции должны выполняться автоматически при запуске.  
    · Настройки приложения — через переменные окружения (.env).  
    · Код проекта должен быть структурирован
    · Команда запуска: go run cmd/api/main.go

## Этапы выполнения дипломного проекта

**Этап 1. Настройка окружения**
1. Изучите структуру.
2. Запустите PostgreSQL через docker-compose up -d.
3. Создайте .env файл на основе .env.example.
4. Убедитесь, что можете подключиться к базе.

**Этап 2. Реализация моделей данных**
5. Откройте internal/model/models.go.
6. Определите структуры:  
    · User  
    · Post  
    · Comment
7. Добавьте DTO-структуры для запросов/ответов.
8. Реализуйте методы валидации входных данных.

**Этап 3. Создание миграций**
9. Создайте файл в папке migrations/.
10. Определите таблицы:  
    · users  
    · posts  
    · comments
11. Добавьте индексы:  
    · по email для users  
    · по user_id для posts  
    · по post_id для comments
12. Проверьте автоматическое выполнение миграций.

**Этап 4. Реализация репозиториев**  
    UserRepository  
    · Create()  
    · GetByEmail()  
    · GetByID()  
    PostRepository  
    · CRUD-методы  
    · получение всех постов с пагинацией  
    CommentRepository  
    · Create()  
    · GetByPostID()  
    Все запросы должны быть подготовленными.

**Этап 5. Реализация сервисов**  
    UserService  
    · Register() — валидация + хеширование  
    · Login() — проверка пароля + генерация JWT  
    · ValidateToken() — проверка токена  
    PostService  
    · CRUD-операции  
    · проверка прав доступа  
    · планировщик публикаций  
    · GetAll(limit, offset)  
    CommentService  
    · проверка существования поста  
    · создание комментария  
    · получение комментариев  

**Этап 6. Реализация HTTP-хендлеров**  
    · AuthHandler — регистрация и вход  
    · PostHandler — операции с постами  
    · CommentHandler — комментарии  
    Требования:  
    · единый формат ответа  
    · корректные коды HTTP  
    · логирование  

**Этап 7. Middleware**  
    · JWT-middleware  
    · логирование запросов  
    · panic-recover  
    · CORS (при необходимости)  

**Этап 8. Интеграция и тестирование**
13. Собрать все компоненты в main.go.
14. Настроить маршруты.
15. Протестировать через Postman/curl.
16. Написать базовые автоматические тесты.
17. Добавить тесты на: · публикацию постов после времени publish_at; · корректность статуса публикации.  

**Этап 9. Документирование**
18. Обновить README.md:  
    · инструкция по запуску  
    · схема API  
    · описания моделей
19. Добавить примеры curl/Postman-запросов.
20. Указать используемые технологии.  
    Перед отправкой работы убедитесь, что:  
    · все эндпоинты работают корректно;  
    · регистрация и вход функционируют;  
    · JWT генерируется и проверяется;  
    · авторизация адекватно ограничивает доступ;  
    · чужие посты недоступны для редактирования/удаления;  
    · отложенные публикации работают корректно и публикуются автоматически;  
    · пароли хранятся в хешированном виде;  
    · валидация всех входных данных работает;  
    · пагинация корректна;  
    · логирование включено;  
    · миграции применяются автоматически;  
    · код отформатирован go fmt;  
    · проект запускается без ошибок;  
    · README.md актуален.