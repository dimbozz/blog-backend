1. Инструменты
Go 1.21+ — основной язык разработки.
PostgreSQL — реляционная база данных.
Docker + Docker Compose — запуск окружения.
Postman / curl — тестирование API.
GitHub / GitLab / GitVerse — репозиторий.
Любая IDE (VS Code, GoLand).
Рекомендуемые библиотеки
· github.com/lib/pq — драйвер PostgreSQL
· github.com/golang-jwt/jwt/v5 — JWT
· golang.org/x/crypto/bcrypt — хеширование паролей
· github.com/joho/godotenv — работа с .env
· github.com/go-chi/chi/v5 или github.com/gin-gonic/gin — маршрутизация
· github.com/jmoiron/sqlx — удобная работа с SQL (рекомендуется)

2. Задание
Разработать расширенное REST API для блог-платформы.
2.1. Функциональные требования

Управление пользователями
Эндпоинты:
· POST /api/register — регистрация пользователя
· POST /api/login — вход
· при успешном входе возвращается JWT-токен
Требования:
· email должен быть уникальным
· пароли хешируются (bcrypt)
· корректные коды ошибок
· валидация входных данных
Управление постами
Эндпоинты:
· POST /api/posts — создать пост (только авторизованный пользователь)
· GET /api/posts — получить список постов (доступно всем)
· GET /api/posts/{id} — получить один пост
· PUT /api/posts/{id} — обновить пост (только автор)
· DELETE /api/posts/{id} — удалить пост (только автор)
Требования:
· автор поста определяется по JWT
· изменение чужого поста → 403 Forbidden
· для списка постов должна быть пагинация (limit, offset)
· валидация входных данных
· корректные HTTP-коды
Управление комментариями
Эндпоинты:
· POST /api/posts/{postId}/comments — комментировать пост
· GET /api/posts/{postId}/comments — получить комментарии
Условия:
· комментировать могут только авторизованные пользователи
· при добавлении комментария проверяется существование поста
Планировщик отложенных публикаций
Ваша система должна поддерживать возможность создания постов с отложенной публикацией.
Описание функционала:
– в таблице постов должно появиться поле publish_at (TIMESTAMP);
– если пользователь указал время публикации в будущем, пост создаётся в статусе черновик;
– фоновая горутина-планировщик (ticker + контекст) каждые N секунд:
o проверяет посты, у которых publish_at <= now();
o автоматически публикует такие посты;
– обработка публикаций должна происходить конкурентно:
o воркер или worker pool;
– логирование процесса публикации обязательно;
– graceful shutdown: при остановке сервиса фоновые задачи должны корректно завершаться.
Общие требования к API
· GET /api/health — проверка состояния сервиса
· логирование всех запросов
· структура слоёв:Handler → Service → Repository → PostgreSQL
· использование JWT-middleware для защищённых эндпоинтов
· центральная обработка ошибок
· единый формат JSON-ответов
2.2. Технические требования
· БД — PostgreSQL (через Docker Compose).
· Миграции должны выполняться автоматически при запуске.
· Настройки приложения — через переменные окружения (.env).
· Код проекта должен быть структурирован
· Команда запуска: go run cmd/api/main.go
3. Этапы выполнения дипломного проекта
Этап 1. Настройка окружения

Изучите структуру.
Запустите PostgreSQL через docker-compose up -d.
Создайте .env файл на основе .env.example.
Убедитесь, что можете подключиться к базе.
Этап 2. Реализация моделей данных
Откройте internal/model/models.go.
Определите структуры:
· User
· Post
· Comment
Добавьте DTO-структуры для запросов/ответов.
Реализуйте методы валидации входных данных.
Этап 3. Создание миграций
Создайте файл в папке migrations/.
Определите таблицы:
· users
· posts
· comments
Добавьте индексы:
· по email для users
· по user_id для posts
· по post_id для comments
Проверьте автоматическое выполнение миграций.
Этап 4. Реализация репозиториев
UserRepository
· Create()
· GetByEmail()
· GetByID()
PostRepository
· CRUD-методы
· получение всех постов с пагинацией
CommentRepository
· Create()
· GetByPostID()
Все запросы должны быть подготовленными.
Этап 5. Реализация сервисов
UserService
· Register() — валидация + хеширование
· Login() — проверка пароля + генерация JWT
· ValidateToken() — проверка токена
PostService
· CRUD-операции
· проверка прав доступа
· планировщик публикаций
· GetAll(limit, offset)
CommentService
· проверка существования поста
· создание комментария
· получение комментариев
Этап 6. Реализация HTTP-хендлеров
· AuthHandler — регистрация и вход
· PostHandler — операции с постами
· CommentHandler — комментарии
Требования:
· единый формат ответа
· корректные коды HTTP
· логирование
Этап 7. Middleware
· JWT-middleware
· логирование запросов
· panic-recover
· CORS (при необходимости)
Этап 8. Интеграция и тестирование
Собрать все компоненты в main.go.
Настроить маршруты.
Протестировать через Postman/curl.
Написать базовые автоматические тесты.
Добавить тесты на: · публикацию постов после времени publish_at; · корректность статуса публикации.
Этап 9. Документирование
Обновить README.md:
· инструкция по запуску
· схема API
· описания моделей
Добавить примеры curl/Postman-запросов.
Указать используемые технологии.
Перед отправкой работы убедитесь, что:
· все эндпоинты работают корректно;
· регистрация и вход функционируют;
· JWT генерируется и проверяется;
· авторизация адекватно ограничивает доступ;
· чужие посты недоступны для редактирования/удаления;
· отложенные публикации работают корректно и публикуются автоматически;
· пароли хранятся в хешированном виде;
· валидация всех входных данных работает;
· пагинация корректна;
· логирование включено;
· миграции применяются автоматически;
· код отформатирован go fmt;
· проект запускается без ошибок;
· README.md актуален.